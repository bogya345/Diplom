<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="common-indentation" style="overflow-x: hidden;">

    <div class="row bg-light">
        <h2><i>{{getPathString()}}</i></h2>
    </div>

    <mat-tab-group mat-align-tabs="start" [(selectedIndex)]="selectedIndex" style="overflow-x: hidden;">
        <!-- #enddocregion align-start -->

        <mat-tab label="–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è" style="overflow-x: hidden;">
            <div class="row">
                <p *ngIf="!dirs; else elseBlock_dirs"><em>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π...</em></p>
                <ng-template #elseBlock_dirs>
                    <table class='table table-striped groupstable' aria-labelledby="tableLabel" *ngIf="dirs">

                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ì–æ–¥ –Ω–∞—á–∞–ª–∞</th>
                                <th></th>
                                <th colspan="2">&nbsp;–§–ì–û–° —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</th>
                                <th>–£—á–µ–±–Ω—ã–π –ø–ª–∞–Ω</th>
                                <th *ngIf="user.access_role_id != 3 && user.access_role_id != 4">–°—Ç–∞—Ç—É—Å –ü–ü–°</th>
                                <th *ngIf="user.access_role_id == 2 && user.dep_id != 2 || user.access_role_id == 3">
                                    –°—Ç–∞—Ç—É—Å –û–ü–û–ü</th>
                                <th>–ö–∞–¥—Ä–æ–≤–∞—è —Å–ø—Ä–∞–≤–∫–∞</th>
                            </tr>
                        </thead>

                        <tr *ngFor="let item of dirs">

                            <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
                            <td>{{ item.Dir_name }}</td>

                            <!-- –ì–æ–¥ –Ω–∞—á–∞–ª–∞ -->
                            <td>{{ item.StartYear }}</td>

                            <!-- –í—ã–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                            <td>
                                <button [disabled]="item.AcPl_id == null" class=" btn btn-primary"
                                    (click)="setSelectedDirection( item )">
                                    –í—ã–±—Ä–∞—Ç—å
                                </button>
                            </td>

                            <!-- –§–ì–û–° —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è -->
                            <td>
                                <!--kek1--> 
                                <div *ngIf="item.Status != null"> 
                                    <div *ngIf="item.Status_pps.Status_up == item.Status_pps.Status_down">
                                        <button class="btn btn-info" mat-raised-button id="logout-button"
                                        (click)="openModal( item )"
                                        [disabled]="item.Status.Status_up == 0 || item.Status.Status_up == 1">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                                    </div>
                                    <div *ngIf="item.Status_pps.Status_up != item.Status_pps.Status_down">
                                        <button class="btn btn-info" mat-raised-button id="logout-button"
                                        (click)="openModal( item )"
                                        [disabled]="true">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                                    </div>
                                </div>
                                <div *ngIf="item.Status == null">
                                    <button class="btn btn-info" mat-raised-button id="logout-button"
                                        (click)="openModal( item )"
                                        [disabled]="true">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                                </div>
                                <!-- <div style="border: solid 2px;">
                                    
                                </div> -->
                            </td>
                            <td>
                                <div>
                                    <span *ngIf="item.Highlight == 2">‚úÖ</span>
                                    <span
                                        *ngIf="item.Highlight == 1 && item.Status.Status_up == item.Status.Status_down">üüß</span>
                                    <span *ngIf="item.Status != null && item.Highlight == 0 && item.Status.Status_down != 0">‚ùå</span>
                                    <span *ngIf="item.Highlight == -1 || item.Status.Status_down == 0">‚¨ú</span>
                                    <!-- <span *ngIf="item.Highlight == -1 || item.Status_pps.Status_down == 0">‚¨ú</span> -->
                                </div>
                            </td>

                            <!-- –£—á–µ–±–Ω—ã–π –ø–ª–∞–Ω -->
                            <p *ngIf="item.AcPl_id == null; else elseBlock_acPlan">
                                <td *ngIf="user.dep_id == item.Dep_id">
                                    <p>–ó–∞–≥—Ä—É–∑–∏—Ç—å —É—á–µ–±–Ω—ã–π –ø–ª–∞–Ω</p>
                                    <!-- <mat-spinner *ngIf="spinnerIsOn" diameter="40"></mat-spinner> -->
                                    <input #file type="file" accept=".xlsx" multiple
                                        (change)="upload(file.files, item)" />
                                </td>
                                <td *ngIf="user.dep_id != item.Dep_id">
                                    <p>–£—á–µ–±–Ω—ã–π –ø–ª–∞–Ω –Ω–µ –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω</p>
                                </td>
                            </p>
                            <ng-template #elseBlock_acPlan>
                                <td>
                                    <!-- <a href="ms-excel:ofe|u|http://localhost:4200/assets/PlanIST16.xlsx">
                                        –û—Ç–∫—Ä—ã—Ç—å —É—á–µ–±–Ω—ã–π –ø–ª–∞–Ω
                                    </a> —Ö–æ—Ç–µ–ª –±—ã –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –±—ç–∫—É –∑–∞ —ç—Ç–∏–º, —Ç–∞–∫ –∫–∞–∫ –ª—É—á—à–µ —Ç–∞–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ—Ñ–µ—Ä –∏ –æ—Ç—Ç—É–¥–∞ –∂–µ –∏ –∑–∞–±–∏—Ä–∞—Ç—å-->
                                    <button class="btn btn-info" (click)="openAcPlan(item)">
                                        –°–∫–∞—á–∞—Ç—å —É—á–µ–±–Ω—ã–π –ø–ª–∞–Ω
                                    </button>
                                    <button *ngIf="user.dep_id == item.Dep_id" class="btn btn-info" mat-raised-button
                                        id="reload-acplan" (click)="openModalReloadAcPlan( item )">
                                        –ò–∑–º–µ–Ω–∏—Ç—å
                                    </button>
                                </td>
                            </ng-template>

                            <!-- –°—Ç–∞—Ç—É—Å –ü–ü–° -->
                            <td *ngIf="user.access_role_id != 3 && user.access_role_id != 4">
                                <div style="padding: 5px; width: 70px; height:30px;">
                                    <div *ngIf="item.Status_pps.Status_down != 0">
                                        {{item.Status_pps_msg}}
                                        <div *ngIf="item.Status_pps.Status_up != item.Status_pps.Status_down">
                                            <!-- <i class="fa fa-close"></i> -->
                                            ‚ùå
                                        </div>
                                        <div *ngIf="item.Status_pps.Status_up == item.Status_pps.Status_down">
                                            <!-- in decimal &#10004; -->
                                            <!-- in hex   &#x2714;   -->
                                            ‚úÖ
                                        </div>
                                    </div>
                                </div>
                            </td>

                            <!-- –°—Ç–∞—Ç—É—Å –û–ü–û–ü -->
                            <td
                                *ngIf="user.access_role_id == 2 && user.dep_id == item.Dep_id || user.access_role_id == 3">
                                <div style="padding: 5px; width: 70px; height:30px;">
                                    <div *ngIf="item.Status != null && item.Status.Status_down != 0">
                                        {{item.Status_msg}}
                                        <div *ngIf="item.Status.Status_up != item.Status.Status_down">
                                            <!-- <i class="fa fa-close"></i> -->
                                            ‚ùå
                                        </div>
                                        <div *ngIf="item.Status.Status_up == item.Status.Status_down">
                                            <!-- in decimal &#10004; -->
                                            <!-- in hex  &#x2714;    -->
                                            ‚úÖ
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td *ngIf="user.dep_id != item.Dep_id && user.access_role_id != 3"></td>

                            <!-- –ö–∞–¥—Ä–æ–≤–∞—è —Å–ø—Ä–∞–≤–∫–∞ -->
                            <td>
                                <button [disabled]="!(item.AcPl_id != null && user.dep_id == item.Dep_id && item.Highlight == 2)"
                                    class="btn btn-primary" (click)="openModalShowDirProperty( item )">
                                    <!-- || user.dep_id != selectedDep.Dep_id -->
                                    –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å
                                </button>
                            </td>

                        </tr>

                    </table>
                </ng-template>
            </div>
        </mat-tab>

        <mat-tab label="–£—á–µ–±–Ω—ã–π –ø–ª–∞–Ω" class="bg-info" [disabled]="(selectedDir==null)">
            <app-hod-acplan style="margin-left: 5px;" *ngIf="selectedDir" [direction]="selectedDir">
            </app-hod-acplan>
        </mat-tab>

        <!-- <mat-tab label="–ß–µ—Ç—ã—Ä–µ">
            Content 4
        </mat-tab> -->

    </mat-tab-group>

</div>